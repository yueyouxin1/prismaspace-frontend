# 迁移需求说明模板

> 用途：用于在当前项目中发起“从外部/历史实现迁移能力”的需求，确保迁移结果在**核心意图、业务逻辑、UI 交互**上与目标保持高度一致，同时完成项目环境适配。

---

## 0. 文档信息

- 需求名称：`[迁移需求简称]`
- 迁移目标来源：`[仓库/分支/目录/版本/页面地址]`
- 目标落地位置：`[当前项目路径]`

---

## 1. 绝对遵循原则（必须原文保留）

无论是迁移过程中对迁移目标进行了优化或改写，都必须遵循迁移目标的核心意图、业务逻辑、UI逻辑。这是迁移任务的唯一目的，就是迁移目标的核心逻辑，但以适配我们当前项目环境的方式集成。最终期望得到与迁移目标在代码逻辑和UI交互几乎一致的落地。

**依赖完整性原则（必须新增）：** 迁移不仅包含“表层代码/页面”，还必须覆盖目标实现所依赖的必要上下游与支撑能力（包括但不限于：组件/工具库、样式与主题变量、图片/字体/动画资产、数据模型与接口契约、权限与路由约束、国际化/配置项、运行时约束）。若为保证等价行为必须整体迁移模块/包，则应执行“整包迁移”，不得只做表层拼装。

---

## 2. 迁移目标与边界

### 2.1 迁移目标

- 目标模块/页面：`[名称]`
- 目标核心能力：`[功能点清单]`
- 目标关键交互：`[交互流程/状态变化]`

### 2.2 迁移边界

- 本次 In Scope：`[明确本次要迁移的功能范围]`
- 本次 Out of Scope：`[明确不做内容，避免范围蔓延]`

---

## 3. 项目环境约束（强制）

以下约束优先于目标项目的工程实现细节：

- `README.md`（仓库根目录）：统一架构白皮书与领域模型
- `prismaspace-frontend/README.md`（前端根目录）：前端对齐后端执行手册
- `prismaspace-frontend/doc/prisma-space-ui.md`：UI 美学规范（全局项目视野）
- `prismaspace-frontend/doc/prisma-space-pages-ui.md`：UI 美学规范（细节与模块）
- `prismaspace-frontend/doc/prisma-space-runtime.md`：资源运行时面板前端架构指导
- `prismaspace-frontend/doc/ui-development-guidelines.md`：UI 组件选型与兜底路径
- `prismaspace-frontend/doc/Vue通用架构与开发规范指南.md`：Vue 工程结构与编码规范

冲突处理规则：

1. 先保证迁移目标的核心意图、业务逻辑、UI逻辑不变。
2. 在不改变核心逻辑前提下，按当前项目规范重构实现方式。
3. 若出现不可兼容冲突，需在需求/PR 中记录差异与原因，并给出等价方案。

---

## 4. 迁移策略（非“完全复刻”，是“等价落地”）

### 4.1 总体策略

- 不要求逐行、逐文件、逐技术栈“完全复刻”。
- 要求核心逻辑、用户可见行为、关键交互路径与目标几乎一致。
- 以匹配当前项目环境的方式进行组件替换、架构适配、工程化集成。
- 依赖链完整迁移：确保目标实现所依赖的关键能力与资源一并迁移或等价落地，必要时执行整包迁移。

### 4.2 等价标准

- **业务等价**：输入、处理、输出及异常分支一致。
- **交互等价**：操作流程、反馈时机、状态切换一致。
- **UI 逻辑等价**：结构层次、可见条件、关键状态表现一致。

---

## 5. 允许做的事（Allowed）

在不破坏“核心意图、业务逻辑、UI逻辑”的前提下，允许：

1. **工程适配**：按当前项目目录结构、状态管理、路由、构建方式改写。
2. **技术替换**：将目标实现替换为本项目统一技术方案（如组件库、工具库）。
3. **可修复问题修正**：若发现目标存在明确逻辑问题，可做等价修复。
4. **无副作用增强**：可做性能、可维护性、可读性优化，且不改变外部行为。
5. **健壮性补强**：补齐空值保护、边界条件、防抖节流等安全性增强。
6. **可观测性增强**：补充必要日志、错误提示、调试信息（不影响用户主流程）。

> 所有优化/增强都必须满足：默认行为不变、对外接口不破坏、用户交互预期不改变。

---

## 6. 不允许做的事（Not Allowed）

以下行为一律禁止：

1. 以“优化”为名改变迁移目标的核心业务规则。
2. 擅自删减关键交互流程、状态反馈或异常处理路径。
3. 改变用户可见的关键 UI 逻辑（显示条件、操作顺序、结果语义）。
4. 未评审即新增需求范围外能力，导致“借迁移做重构”。
5. 仅因个人偏好替换成熟逻辑，造成行为偏差。
6. 引入与当前项目规范冲突的技术方案或依赖。
7. 只迁移表层功能而缺失关键依赖，导致行为或质量与目标不一致。

---

## 7. 迁移实施清单（执行时填写）

### 7.1 对照清单

| 维度 | 目标描述 | 迁移实现 | 是否等价 | 备注 |
|---|---|---|---|---|
| 核心意图 | `[]` | `[]` | `[是/否]` | `[]` |
| 业务逻辑 | `[]` | `[]` | `[是/否]` | `[]` |
| UI 逻辑 | `[]` | `[]` | `[是/否]` | `[]` |
| 关键交互 | `[]` | `[]` | `[是/否]` | `[]` |

### 7.2 差异记录（必须）

| 差异点 | 类型（适配/修复/增强） | 是否无副作用 | 原因 | 验证方式 |
|---|---|---|---|---|
| `[]` | `[]` | `[是/否]` | `[]` | `[]` |

---

## 8. 交付物要求

1. 迁移后的实现代码：`[目标目录]`
2. 可运行示例/演示入口：`[demo 路径]`
3. 差异说明文档：`[记录适配/修复/增强项]`
4. 验证结果：`[自测清单、截图、录屏或测试报告]`

---

## 9. 验收标准（DoD）

- [ ] 核心意图与目标一致。
- [ ] 业务逻辑与目标一致（含关键边界场景）。
- [ ] UI 逻辑与交互路径与目标几乎一致。
- [ ] 关键依赖链已完整迁移或等价落地，必要时完成整包迁移。
- [ ] 所有适配/修复/增强均可证明“无副作用”。
- [ ] 实现符合当前项目工程规范，可稳定集成。
- [ ] 差异项有完整记录，可追溯、可复核。

---

## 10. 一句话验收结论模板

> 本次迁移已在当前项目环境完成等价落地：核心意图、业务逻辑、UI逻辑与迁移目标保持一致；所有优化与修复均为无副作用增强。
