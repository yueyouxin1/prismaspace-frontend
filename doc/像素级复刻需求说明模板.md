# 像素级复刻需求说明模板

> 用途：用于在当前项目中发起“像素级复刻（Pixel-perfect）”需求，确保落地结果在视觉细节、交互逻辑、业务行为上与目标高度一致，并可被客观验收。

---

## 0. 文档信息

- 需求名称：`[复刻需求简称]`
- 目标来源：`[仓库/分支/目录/页面链接/版本号]`
- 目标落地位置：`[当前项目路径]`

---

## 1. 绝对遵循原则（必须原文保留）

无论是迁移过程中对迁移目标进行了优化或改写，都必须遵循迁移目标的核心意图、业务逻辑、UI逻辑。这是迁移任务的唯一目的，就是迁移目标的核心逻辑，但以适配我们当前项目环境的方式集成。最终期望得到与迁移目标在代码逻辑和UI交互几乎一致的落地。

**依赖完整性原则（必须新增）：** 像素级复刻不仅包含“表层页面”，还必须覆盖目标实现所依赖的必要上下游与支撑能力（包括但不限于：组件/工具库、样式与主题变量、图片/字体/动画资产、数据模型与接口契约、权限与路由约束、国际化/配置项、运行时约束）。若为保证像素级与行为一致必须整体迁移模块/包，则应执行“整包复刻”，不得只做表层拼装。

---

## 2. 复刻目标定义（避免歧义）

### 2.1 Pixel-perfect 的定义

本需求中的“像素级复刻”指：

1. **视觉一致**：布局、尺寸、间距、字体、颜色、圆角、阴影、层级关系一致。
2. **交互一致**：操作路径、反馈时机、状态切换、动效节奏一致。
3. **逻辑一致**：关键业务规则、校验、异常分支、空态逻辑一致。

### 2.2 本次范围

- In Scope：`[页面/组件/流程清单]`
- Out of Scope：`[明确不做项，防止范围蔓延]`

---

## 3. 规则优先级与冲突处理

实现与验收按以下优先级执行：

1. 当前项目规范文档（强约束）
2. 本需求说明文档
3. 目标对照资源（设计稿/参考实现/线上页面）

冲突处理规则：

1. 不改变“核心意图、业务逻辑、UI逻辑”。
2. 在不改变核心逻辑前提下，优先适配当前项目工程规范。
3. 无法完全一致时，必须记录差异、原因、影响与验证结论。

---

## 4. 必须遵循的项目文档

- `README.md`（仓库根目录）：统一架构白皮书与领域模型
- `prismaspace-frontend/README.md`（前端根目录）：前端对齐后端执行手册
- `prismaspace-frontend/doc/prisma-space-ui.md`：UI 美学规范（全局项目视野）
- `prismaspace-frontend/doc/prisma-space-pages-ui.md`：UI 美学规范（细节与模块）
- `prismaspace-frontend/doc/prisma-space-runtime.md`：资源运行时面板前端架构指导
- `prismaspace-frontend/doc/ui-development-guidelines.md`：UI 组件选型与兜底路径
- `prismaspace-frontend/doc/Vue通用架构与开发规范指南.md`：Vue 工程结构与编码规范

---

## 5. 对照输入材料（必须明确）

- 参考实现：`[路径或仓库地址]`
- 视觉对照：`[设计稿/截图/录屏]`
- 交互对照：`[可操作页面/交互脚本/录屏]`
- 数据与接口对照：`[示例数据/接口契约]`

> 若输入材料缺失，需先补齐再开工，避免“凭感觉复刻”。

---

## 6. 实现约束

### 6.1 技术与架构约束

- 按当前项目目录结构、命名规范、导出规范实现。
- 统一使用项目既有技术栈（如 `shadcn-vue`）进行等价落地。
- 不引入与项目规范冲突的新框架或重依赖。
- 依赖链完整复刻：目标实现所依赖的关键能力与资源必须一并复刻或等价落地，必要时执行整包复刻。

### 6.2 状态覆盖约束

必须覆盖并可验证：

- 默认、Hover、Focus、Active、Disabled
- Loading、Empty、Error
- 边界输入与异常场景

---

## 7. 允许做的事（Allowed）

在不破坏核心一致性的前提下，允许：

1. 工程适配：为接入当前项目进行必要改写（目录、路由、状态管理、构建适配）。
2. 技术等价替换：用项目内统一组件/工具替换目标技术实现。
3. 逻辑缺陷修复：目标存在可确认缺陷时，进行无副作用修复。
4. 无副作用增强：性能、健壮性、可维护性优化，但不改变用户可见行为。

---

## 8. 不允许做的事（Not Allowed）

以下行为一律禁止：

1. 擅自改变核心业务规则或关键流程。
2. 擅自删减关键交互状态、错误反馈或异常处理路径。
3. 以个人偏好改动关键 UI 逻辑（显示条件、行为顺序、结果语义）。
4. 借复刻之名实施范围外重构或需求扩张。
5. 未记录差异即交付“看起来差不多”的结果。
6. 只复刻表层界面而缺失关键依赖，导致视觉或行为偏差。

---

## 9. 交付物清单

1. 复刻实现代码：`[目标目录]`
2. 可运行 Demo：`apps/studio-web/src/components/demo-playground/[demo-name]`
3. 差异说明：`[适配/修复/增强项清单]`
4. 验证证据：`[截图/录屏/测试记录]`

---

## 10. 差异记录模板（必须填写）

| 差异点 | 类型（适配/修复/增强） | 原因 | 用户可见影响 | 是否无副作用 | 验证方式 |
|---|---|---|---|---|---|
| `[]` | `[]` | `[]` | `[有/无]` | `[是/否]` | `[]` |

---

## 11. 验收标准（DoD）

- [ ] 视觉细节与目标一致（核心页面/组件肉眼不可明显区分）。
- [ ] 交互路径、状态反馈、异常处理与目标一致。
- [ ] 业务规则与边界条件行为与目标一致。
- [ ] 关键依赖链已完整复刻或等价落地，必要时完成整包复刻。
- [ ] 所有差异项已记录并证明为“无副作用”。
- [ ] 实现符合当前项目规范并可稳定集成。

---

## 12. 一句话验收结论模板

> 本次像素级复刻已完成等价落地：视觉、交互与业务逻辑与目标保持高度一致；所有差异均为可追溯、无副作用的工程适配或增强。

